#!/bin/bash

SCRIPT_DIR=$(dirname $(readlink -f $0))

echo  "[*] Build and Run of vulnerable jQuery-File-Plugin (8.1.0, 9.0.0, 9.22.0, and 9.22.1). 9.22.1 is patched."
docker build -t vuln ${SCRIPT_DIR}

echo "[*] Running docker"
docker run -p 8000:80 -d vuln

echo "[*] Test now the following:"
echo "./CVE-2018-9206.sh http://localhost:8080/jQuery-File-Upload-8.1.0"
echo "./CVE-2018-9206.sh http://localhost:8000/jQuery-File-Upload-9.0.0"
echo "./CVE-2018-9206.sh http://localhost:8000/jQuery-File-Upload-9.22.0"
echo "./CVE-2018-9206.sh http://localhost:8000/jQuery-File-Upload-9.22.1"